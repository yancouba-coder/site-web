{"ast":null,"code":"import $ from 'jquery';\nvar libelle_container = $(\"tr#libelles\");\nvar value_container = $(\"tr#values\");\nvar json = JSON.parse($(\"p#mydata\").html());\n\nfunction add_libelle(key) {\n  var newth = document.createElement(\"th\");\n  newth.id = key;\n  newth.className = \"text-center text-mediumblue font-normal\";\n  var newCloseButton = document.createElement(\"button\");\n  newCloseButton.className = \"btn-close\";\n  newCloseButton.type = \"button\";\n  newCloseButton.setAttribute(\"aria-label\", \"Close\");\n\n  newCloseButton.onclick = function () {\n    var p = document.getElementById(\"libelles\");\n    var v = document.getElementById(\"values\");\n\n    while (p.firstChild) {\n      p.removeChild(p.firstChild);\n      v.removeChild(v.firstChild);\n    }\n\n    json[\"bareme\"].splice(key, 1);\n    main();\n  };\n\n  var newTextArea = document.createElement(\"textarea\");\n  newTextArea.id = key;\n  newTextArea.value = json[\"bareme\"][key][\"libelle\"];\n  newTextArea.className = \"form-control text-center text-mediumblue font-normal\";\n  newTextArea.setAttribute(\"rows\", \"6\");\n\n  newTextArea.onchange = function () {\n    json[\"bareme\"][this.id][\"libelle\"] = this.value;\n  };\n\n  newth.append(newCloseButton);\n  newth.append(newTextArea);\n  libelle_container.append(newth);\n}\n\nfunction add_value(key) {\n  var newtd = document.createElement(\"td\");\n  newtd.id = key;\n  newtd.className = \"text-center\";\n  var newInput = document.createElement(\"input\");\n  newInput.id = key;\n  newInput.value = json[\"bareme\"][key][\"valeur\"];\n  newInput.className = \"form-control text-center text-mediumblue font-normal\";\n\n  newInput.onchange = function () {\n    json[\"bareme\"][key][\"valeur\"] = this.value;\n  };\n\n  newtd.append(newInput);\n  value_container.append(newtd);\n}\n\nfunction add_bareme() {\n  var key = json[\"bareme\"].length;\n  json[\"bareme\"].push({\n    \"libelle\": \"Inserer un libelle\",\n    \"valeur\": \"Note\"\n  });\n  add_libelle(key);\n  add_value(key);\n}\n\nfunction commentaire_manager() {\n  // Ajout du commentaire dans le formulaire\n  if (json.hasOwnProperty('commentaire')) {\n    delete json[\"commentaire\"];\n  } else {\n    // Suppression du commentaire dans le formulaire\n    json[\"commentaire\"] = \"\";\n  }\n}\n\nfunction submit_json() {\n  var xhr = new XMLHttpRequest();\n  var url = $('button#submit_button').val();\n\n  if (!json.hasOwnProperty(\"selection\")) {\n    json[\"selection\"] = \"\";\n  }\n\n  xhr.open(\"POST\", url, true);\n  xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n  xhr.send(JSON.stringify(json));\n  window.location.replace(url);\n} // Fonction de génération des champs personalisable par le JSON en BDD\n\n\nfunction main() {\n  for (var key in json[\"bareme\"]) {\n    add_libelle(key);\n    add_value(key);\n  }\n\n  if (json.hasOwnProperty(\"commentaire\")) {\n    $('input#commentaire').prop('checked', true);\n  } else {\n    $('input#commentaire').prop('checked', false);\n  }\n}\n\nmain(); // EventListener\n\n$(function () {\n  return $('button#add_bareme').on('click', function () {\n    return add_bareme();\n  });\n}, $('button#submit_button').on('click', function () {\n  return submit_json();\n}), $('input#commentaire').on('change', function () {\n  return commentaire_manager();\n}));\n$('select#ver').change(function () {\n  window.location.replace($(this).val());\n});","map":{"version":3,"sources":["/mnt/c/Users/thier/RubymineProjects/MIAGEStage/app/javascript/packs/notation_formats.js"],"names":["$","libelle_container","value_container","json","JSON","parse","html","add_libelle","key","newth","document","createElement","id","className","newCloseButton","type","setAttribute","onclick","p","getElementById","v","firstChild","removeChild","splice","main","newTextArea","value","onchange","append","add_value","newtd","newInput","add_bareme","length","push","commentaire_manager","hasOwnProperty","submit_json","xhr","XMLHttpRequest","url","val","open","setRequestHeader","send","stringify","window","location","replace","prop","on","change"],"mappings":"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","sourcesContent":["import $ from 'jquery';\r\n\r\nvar libelle_container = $(\"tr#libelles\")\r\nvar value_container = $(\"tr#values\")\r\nvar json = JSON.parse($(\"p#mydata\").html());\r\n\r\nfunction add_libelle(key) {\r\n    let newth = document.createElement(\"th\");\r\n    newth.id = key;\r\n    newth.className = \"text-center text-mediumblue font-normal\";\r\n\r\n    let newCloseButton = document.createElement(\"button\");\r\n    newCloseButton.className = \"btn-close\";\r\n    newCloseButton.type = \"button\";\r\n    newCloseButton.setAttribute(\"aria-label\", \"Close\");\r\n    newCloseButton.onclick = function () {\r\n        let p = document.getElementById(\"libelles\");\r\n        let v = document.getElementById(\"values\");\r\n        while (p.firstChild) {\r\n            p.removeChild(p.firstChild);\r\n            v.removeChild(v.firstChild);\r\n        }\r\n        json[\"bareme\"].splice(key, 1);\r\n        main();\r\n    };\r\n\r\n    let newTextArea = document.createElement(\"textarea\");\r\n    newTextArea.id = key;\r\n    newTextArea.value = json[\"bareme\"][key][\"libelle\"];\r\n    newTextArea.className = \"form-control text-center text-mediumblue font-normal\";\r\n    newTextArea.setAttribute(\"rows\", \"6\");\r\n    newTextArea.onchange = function() {\r\n        json[\"bareme\"][this.id][\"libelle\"] = this.value;\r\n    };\r\n\r\n    newth.append(newCloseButton);\r\n    newth.append(newTextArea);\r\n\r\n    libelle_container.append(newth);\r\n}\r\n\r\nfunction add_value(key) {\r\n    let newtd = document.createElement(\"td\");\r\n    newtd.id = key;\r\n    newtd.className = \"text-center\";\r\n\r\n    let newInput = document.createElement(\"input\");\r\n    newInput.id = key;\r\n    newInput.value = json[\"bareme\"][key][\"valeur\"];\r\n    newInput.className = \"form-control text-center text-mediumblue font-normal\";\r\n    newInput.onchange = function() {\r\n        json[\"bareme\"][key][\"valeur\"] = this.value;\r\n    };\r\n\r\n    newtd.append(newInput);\r\n\r\n    value_container.append(newtd);\r\n}\r\n\r\nfunction add_bareme() {\r\n    let key = json[\"bareme\"].length;\r\n    json[\"bareme\"].push({\"libelle\":\"Inserer un libelle\",\"valeur\":\"Note\"});\r\n    add_libelle(key);\r\n    add_value(key);\r\n}\r\n\r\nfunction commentaire_manager () {\r\n    // Ajout du commentaire dans le formulaire\r\n    if (json.hasOwnProperty('commentaire')) {\r\n        delete json[\"commentaire\"];\r\n    } else { // Suppression du commentaire dans le formulaire\r\n        json[\"commentaire\"] = \"\";\r\n    }\r\n}\r\n\r\nfunction submit_json() {\r\n    let xhr = new XMLHttpRequest();\r\n    let url = $('button#submit_button').val();\r\n    if (!json.hasOwnProperty(\"selection\")) {\r\n        json[\"selection\"] = \"\";\r\n    }\r\n    xhr.open(\"POST\", url, true);\r\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n    xhr.send(JSON.stringify(json));\r\n    window.location.replace(url);\r\n}\r\n\r\n// Fonction de génération des champs personalisable par le JSON en BDD\r\nfunction main() {\r\n    for (var key in json[\"bareme\"]){\r\n        add_libelle(key);\r\n        add_value(key);\r\n    }\r\n    if (json.hasOwnProperty(\"commentaire\")) {\r\n        $('input#commentaire').prop('checked', true);\r\n    } else {\r\n        $('input#commentaire').prop('checked', false);\r\n    }\r\n}\r\n\r\nmain();\r\n\r\n// EventListener\r\n$(() =>\r\n    $('button#add_bareme').on('click', () => add_bareme()),\r\n    $('button#submit_button').on('click', () => submit_json()),\r\n    $('input#commentaire').on('change', () => commentaire_manager ())\r\n);\r\n\r\n$('select#ver').change(function(){\r\n    window.location.replace($(this).val());\r\n});\r\n"]},"metadata":{},"sourceType":"module"}